"use strict";var _wp$element=wp.element,RawHTML=_wp$element.RawHTML,createElement=_wp$element.createElement,_wp$blocks=wp.blocks,registerBlockType=_wp$blocks.registerBlockType,createBlock=_wp$blocks.createBlock,_wp$editor=wp.editor,InspectorControls=_wp$editor.InspectorControls,BlockControls=_wp$editor.BlockControls,RichText=_wp$editor.RichText,InnerBlocks=_wp$editor.InnerBlocks,_wp$components=wp.components,Panel=_wp$components.Panel,PanelBody=_wp$components.PanelBody,BaseControl=_wp$components.BaseControl,TextareaControl=_wp$components.TextareaControl,TextControl=_wp$components.TextControl,ToggleControl=_wp$components.ToggleControl,Placeholder=_wp$components.Placeholder,SelectControl=_wp$components.SelectControl,RadioControl=_wp$components.RadioControl,RangeControl=_wp$components.RangeControl,Dashicon=_wp$components.Dashicon;registerBlockType("wpcom/baidu-map",{title:"百度地图",description:"可添加百度地图到文章内容",icon:"location-alt",category:"wpcom",attributes:{pos:{type:"string",default:"116.403963,39.915119"},title:{type:"string",default:""},address:{type:"string",default:""},height:{type:"number",default:300},scroll:{type:"boolean",default:!1}},edit:function(e){var t=e.attributes,a=t.title,l=t.address,n=t.pos,c=t.height,o=t.scroll,r=e.setAttributes;return[React.createElement(InspectorControls,{key:"inspector"},React.createElement(PanelBody,{title:"地图设置"},React.createElement(TextControl,{id:"pos",label:"坐标",placeholder:"请填写位置坐标",help:"",value:n,onChange:function(e){return r({pos:e})}}),React.createElement("p",{className:"wpcom-inspector-html-help"},"位置坐标信息，",React.createElement("a",{href:"http://api.map.baidu.com/lbsapi/getpoint/index.html",target:"_blank"},"可以访问这里拾取")),React.createElement(TextControl,{id:"title",label:"标题",placeholder:"请填写地图标题",help:"例如公司名称",value:a,onChange:function(e){return r({title:e})}}),React.createElement(TextareaControl,{id:"address",label:"地址",placeholder:"请填写地图地址",rows:"2",help:"例如公司地址",value:l,onChange:function(e){return r({address:e})}}),React.createElement(TextControl,{id:"height",label:"高度",placeholder:"请填写地图高度",help:"地图显示高度，单位px，无需带单位",value:c,onChange:function(e){return r({height:e})}}),React.createElement(ToggleControl,{id:"scroll",label:"滚轮缩放",help:"开启后可以使用鼠标滚轮放大缩小地图",checked:o,onChange:function(e){return r({scroll:e})}}))),React.createElement(Placeholder,{icon:"location-alt",label:"百度地图"},React.createElement("div",{className:"wpcom-blocks-panel"},React.createElement("p",null,React.createElement("span",{className:"wpcom-blocks-label"},"标题：")," ",a||"请在右侧边栏选项输入标题"),React.createElement("p",null,React.createElement("span",{className:"wpcom-blocks-label"},"地址：")," ",l||"请在右侧边栏选项输入地址")))]},save:function(e){var t=e.attributes,a=t.title,l=t.address,n=t.pos,c=t.height,o=t.scroll,r='[map title="'+a+'" pos="'+n+'" height="'+c+'" scroll="'+o+'"]'+l+"[/map]";return React.createElement(RawHTML,null,r)}}),registerBlockType("wpcom/alert",{title:"提示信息",description:"添加此区块可显示一段提示信息",icon:"megaphone",category:"wpcom",attributes:{content:{type:"html",source:"children",selector:"p",default:[]},type:{type:"string",default:"default"},icon:{type:"string",default:""},icon_size:{type:"string",default:"0"}},edit:function(e){var t=e.attributes,a=e.setAttributes,l=t.content,n=t.type,c=t.icon,o=t.icon_size;return[React.createElement(InspectorControls,{key:"inspector"},React.createElement(PanelBody,{title:"提示设置"},React.createElement(SelectControl,{id:"type",label:"风格",placeholder:"请选择提示风格",help:"提示面板显示风格",value:n,onChange:function(e){return a({type:e})},options:[{label:"默认",value:"default"},{label:"成功",value:"success"},{label:"提示",value:"info"},{label:"警告",value:"warning"},{label:"危险",value:"danger"}]}),React.createElement(TextControl,{id:"icon",label:"图标",placeholder:"请填写图标名称",help:"",value:c,onChange:function(e){return a({icon:e})}}),React.createElement("p",{className:"wpcom-inspector-html-help"},"图标选择请",React.createElement("a",{href:"https://fontawesome.com/v4.7.0/icons/",target:"_blank"},"点击此处选择")),React.createElement(RadioControl,{id:"icon_size",label:"图标尺寸",placeholder:"请选择图标尺寸",help:"提示面板图标尺寸",selected:o,onChange:function(e){return a({icon_size:e})},options:[{label:"小图标",value:"0"},{label:"大图标",value:"1"}]}))),React.createElement("div",{className:"wpcom-blocks-alert alert alert-"+n+("1"==o?" alert-fa-lg":""),role:"alert"},c?React.createElement("i",{className:"fa fa-"+c+("1"==o?" fa-lg":"")}):"",React.createElement(RichText,{key:"editable",tagName:"div",value:l,onChange:function(e){return a({content:e})}}))]},save:function(e){var t=e.attributes,a=t.content,l=t.type,n=t.icon,c=t.icon_size;return React.createElement("div",null,'[alert size="',c,'" icon="',n,'" type="',l,'"]',React.createElement("p",null,a),"[/alert]")}}),registerBlockType("wpcom/panel",{title:"面板",description:"提示面板信息区块",icon:"info",category:"wpcom",attributes:{type:{type:"string",default:"default"},title:{type:"string",default:"面板标题"},icon:{type:"string",default:""}},edit:function(e){var t=e.attributes,a=e.setAttributes,l=t.type,n=t.icon,c=t.title;return[React.createElement(InspectorControls,{key:"inspector"},React.createElement(PanelBody,{title:"面板设置"},React.createElement(SelectControl,{id:"type",label:"风格",placeholder:"请选择面板风格",help:"面板显示风格",value:l,onChange:function(e){return a({type:e})},options:[{label:"默认",value:"default"},{label:"成功",value:"success"},{label:"提示",value:"info"},{label:"警告",value:"warning"},{label:"危险",value:"danger"}]}),React.createElement(TextControl,{id:"title",label:"标题",placeholder:"请填写面板标题",help:"",value:c,onChange:function(e){return a({title:e})}}),React.createElement(TextControl,{id:"icon",label:"图标",placeholder:"请填写图标名称",help:"",value:n,onChange:function(e){return a({icon:e})}}),React.createElement("p",{className:"wpcom-inspector-html-help"},"图标选择请",React.createElement("a",{href:"https://fontawesome.com/v4.7.0/icons/",target:"_blank"},"点击此处选择")))),React.createElement("div",{className:"wpcom-blocks-panel panel panel-"+l},React.createElement("div",{className:"panel-heading"},React.createElement("h3",{className:"panel-title"},n?React.createElement("i",{className:"fa fa-"+n}):""," ",c," ")),React.createElement("div",{className:"panel-body"}," ",React.createElement(InnerBlocks,null)," "))]},save:function(e){var t=e.attributes,a=t.type,l=t.icon,n=t.title;return React.createElement("div",null,' [panel type="',a,'" title="',n,'" icon="',l,'"] ',React.createElement(InnerBlocks.Content,null)," [/panel] ")}}),registerBlockType("wpcom/acco",{title:"选项卡",description:"单个选项卡，用于手风琴切换区块",icon:"archive",category:"common",parent:["wpcom/accordion"],attributes:{title:{type:"string",default:"请设置标题"},id:{type:"string"},index:{type:"number"},first:{type:"boolean",default:!1}},edit:function(e){var t=e.attributes,a=e.setAttributes,l=t.title,n=t.id,c=t.index;return setTimeout(function(){var t=jQuery("#block-"+e.clientId).closest(".editor-block-list__block-edit").data("block");if(t){var l=wp.data.select("core/editor").getBlockIndex(e.clientId,t);a({first:0===l})}},200),[React.createElement(InspectorControls,{key:"inspector"},React.createElement(PanelBody,{title:"选项设置"},React.createElement(TextControl,{id:"title",label:"标题",placeholder:"请填写标题",help:"",value:l,onChange:function(e){return a({title:e})}}))),React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading",role:"tab",id:"heading-"+n+"-"+c},React.createElement("h4",{className:"panel-title"},React.createElement("a",{role:"button","data-toggle":"collapse","data-parent":"#accordion-"+n,href:"#accordion-"+n+"-"+c,"aria-expanded":"true","aria-controls":"accordion-"+n+"-"+c},l))),React.createElement("div",{id:"accordion-"+n+"-"+c,className:"panel-collapse collapse"},React.createElement("div",{className:"panel-body"},React.createElement(InnerBlocks,null))))]},save:function(e){var t=e.attributes,a=t.title,l=t.id,n=t.index,c=t.first;return React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading",id:"heading-"+l+"-"+n},React.createElement("h4",{className:"panel-title"},React.createElement("a",{role:"button","data-toggle":"collapse","data-parent":"#accordion-"+l,href:"#accordion-"+l+"-"+n},a))),React.createElement("div",{id:"accordion-"+l+"-"+n,className:"panel-collapse collapse"+(c?" in":"")},React.createElement("div",{className:"panel-body"},React.createElement(InnerBlocks.Content,null))))}}),registerBlockType("wpcom/accordion",{title:"手风琴",description:"手风琴切换效果",icon:"archive",category:"wpcom",attributes:{id:{type:"number"},last:{type:"number"}},edit:function(e){function t(){l({last:c+1});var t=wp.blocks.createBlock("wpcom/acco",{id:n,index:c}),a=wp.data.dispatch("core/editor").insertBlock(t,void 0,e.clientId);setTimeout(function(){a.blocks[0]&&jQuery("#block-"+a.blocks[0].clientId).find(".panel-title a").trigger("click")},150)}var a=e.attributes,l=e.setAttributes,n=a.id,c=a.last;return void 0===c&&l({last:0}),n||l({id:(new Date).valueOf()}),[React.createElement(InspectorControls,{key:"inspector"},React.createElement(PanelBody,{title:"设置说明"},"请通过左边区块内容里面的【插入选项】添加单个选项卡")),React.createElement("div",{className:"wp-block-wpcom-accordion panel-group",id:"accordion-"+a.id},React.createElement(InnerBlocks,{allowedBlocks:["wpcom/acco"]}),React.createElement("a",{className:"accordion-inserter",href:"javascript:;",onClick:t},React.createElement(Dashicon,{icon:"insert",label:"插入选项"})," 插入选项"))]},save:function(e){var t=e.attributes.id;return React.createElement("div",{className:"panel-group",id:"accordion-"+t}," ",React.createElement(InnerBlocks.Content,null)," ")}}),registerBlockType("wpcom/tabs",{title:"选项卡切换",description:"可切换的选项卡",icon:"schedule",category:"wpcom",attributes:{type:{type:"string",default:"0"},title:{type:"string"},id:{type:"string"},last:{type:"number"}},edit:function(e){function t(e){var t=jQuery(e.target);r[t.parent().index()]=t.text(),o({title:r.join("||")})}function a(t){t.preventDefault();var a=jQuery(t.target).closest("li"),l=a.index();r.splice(l,1);var n=jQuery("#block-"+e.clientId).find(".tab-content > .editor-inner-blocks > .editor-block-list__layout > .editor-block-list__block"),c=n.eq(l);if(c){var i=c.find(" > .editor-block-list__block-edit").data("block");wp.data.dispatch("core/editor").removeBlock(i),n.find("#block-"+i).remove(),setTimeout(function(){n=jQuery("#block-"+e.clientId).find(".tab-content > .editor-inner-blocks > .editor-block-list__layout > .editor-block-list__block"),n.each(function(e,t){var a=jQuery(t).find(" > .editor-block-list__block-edit").data("block");wp.data.dispatch("core/editor").updateBlockAttributes(a,{index:e,first:0===e})}),o({title:r.join("||"),last:n.length}),setTimeout(function(){a.closest("ul").find("li.active").trigger("click")},200)},120)}}function l(){o({last:p+1}),o({title:c.title?c.title+"||新标签":"新标签"});var t=wp.blocks.createBlock("wpcom/tab",{id:s,index:p});wp.data.dispatch("core/editor").insertBlock(t,void 0,e.clientId)}function n(e){e.preventDefault();var t=jQuery(e.target).closest("li");t.parent().find("li").removeClass("active"),t.addClass("active"),t.closest(".wpcom-blocks-tabs").find(".tab-content .tab-pane").removeClass("active").eq(t.index()).addClass("active")}var c=e.attributes,o=e.setAttributes,r=c.title?c.title.replace(/,/gm,"||"):c.title;r=r?r.split("||"):r,c.id||o({id:(new Date).valueOf()}),void 0===c.last&&o({last:0});var i=c.type,s=c.id,p=c.last,d=r?r.map(function(e,l){return React.createElement("li",{className:0===l?"active":"",onClick:n},React.createElement("a",{href:"#tabs-"+s+"-"+l,contenteditable:"true",onBlur:t},e),React.createElement("i",{className:"close",onClick:a},React.createElement(Dashicon,{size:"14",icon:"no-alt",label:"删除"})))}):"";return[React.createElement(InspectorControls,{key:"inspector"},React.createElement(PanelBody,{title:"选项卡设置"},React.createElement(SelectControl,{id:"type",label:"布局",placeholder:"请选择选项卡布局",help:"",value:i,onChange:function(e){return o({type:e})},options:[{label:"上下布局",value:"0"},{label:"左右布局",value:"1"}]}))),React.createElement("div",{className:"wpcom-blocks-tabs tabs"+("1"===i?" tabs-horizontal":"")},React.createElement("ul",{className:"nav nav-tabs"},d,React.createElement("li",null,React.createElement("a",{className:"tab-inserter",href:"javascript:;",onClick:l},React.createElement(Dashicon,{icon:"insert",label:"插入选项"})))),React.createElement("div",{className:"tab-wrap"},React.createElement("div",{className:"tab-content"},React.createElement(InnerBlocks,{templateLock:"all",allowedBlocks:["wpcom/tab"]}))))]},save:function(e){var t=e.attributes,a=t.type,l=t.id,n=e.attributes.title.replace(/,/gm,"||");return React.createElement("div",null,'[tabs type="',a,'" title="',n,'" id="',l,'"] ',React.createElement(InnerBlocks.Content,null)," [/tabs]")}}),registerBlockType("wpcom/tab",{title:"选项卡",description:"单个选项卡，用于选项卡切换区块",icon:"schedule",category:"common",parent:["wpcom/tabs"],attributes:{id:{type:"string"},index:{type:"number"},first:{type:"boolean",default:!1}},edit:function(e){var t=e.attributes,a=t.id,l=t.index,n=t.first,c=e.setAttributes;return setTimeout(function(){var t=jQuery("#block-"+e.clientId).closest(".editor-block-list__block-edit").data("block");if(t){var a=wp.data.select("core/editor").getBlockIndex(e.clientId,t);c({first:0===a})}},200),React.createElement("div",{className:"tab-pane"+(n?" active":""),id:"tabs-"+a+"-"+l},React.createElement(InnerBlocks,{templateLock:!1}))},save:function(e){var t=e.attributes,a=t.id,l=t.index,n=t.first;return React.createElement("div",{className:"tab-pane"+(n?" active":""),id:"tabs-"+a+"-"+l},React.createElement(InnerBlocks.Content,null))}});